{"data":{"site":{"siteMetadata":{"title":"warizz.io","author":"Warizz Yutanan"}},"markdownRemark":{"id":"e09d0ccc-087c-514a-8078-9b5a390d5d31","excerpt":"I will begin this series with   which I used most often compare to all Lodash’s functions. This is entire code of the function. It begins with  , first 3 lines…","html":"<p>I will begin this series with <a href=\"https://lodash.com/docs/4.17.11#get\"><code class=\"language-text\">_.get</code></a> which I used most often compare to all Lodash’s functions.</p>\n<p>This is entire code of the function.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n    * Gets the value at `path` of `object`. If the resolved value is\n    * `undefined`, the `defaultValue` is returned in its place.\n    *\n    * @static\n    * @memberOf _\n    * @since 3.7.0\n    * @category Object\n    * @param {Object} object The object to query.\n    * @param {Array|string} path The path of the property to get.\n    * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n    * @returns {*} Returns the resolved value.\n    * @example\n    *\n    * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n    *\n    * _.get(object, 'a[0].b.c');\n    * // => 3\n    *\n    * _.get(object, ['a', '0', 'b', 'c']);\n    * // => 3\n    *\n    * _.get(object, 'a.b.c', 'default');\n    * // => 'default'\n    */</span>\n   <span class=\"token keyword\">function</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">,</span> defaultValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> object <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> undefined <span class=\"token punctuation\">:</span> <span class=\"token function\">baseGet</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">return</span> result <span class=\"token operator\">===</span> undefined <span class=\"token operator\">?</span> defaultValue <span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span></code></pre></div>\n<p>It begins with <a href=\"http://usejsdoc.org\"><code class=\"language-text\">JSDoc</code></a>, first 3 lines are description which is simple and clear. <code class=\"language-text\">@static</code>, <code class=\"language-text\">@memberOf</code>, <code class=\"language-text\">@since</code> and <code class=\"language-text\">@category</code> are new to me because I rarely write JSDoc.</p>\n<ul>\n<li>Words prefix with <code class=\"language-text\">@</code> symbol are called <a href=\"http://usejsdoc.org/about-block-inline-tags.html\">“tag”</a></li>\n<li><a href=\"http://usejsdoc.org/tags-static.html\"><code class=\"language-text\">@static</code></a> means the function is static.</li>\n<li><a href=\"http://usejsdoc.org/tags-memberof.html\"><code class=\"language-text\">@memberOf _</code></a> means the function is member of <code class=\"language-text\">_</code></li>\n<li><a href=\"http://usejsdoc.org/tags-since.html\"><code class=\"language-text\">@since 3.7.0</code></a> means the function is in this repo since version 3.7.0</li>\n<li><a href=\"https://github.com/ErnstHaagsman/jsdoc-plugins/blob/master/categories.md\"><code class=\"language-text\">@category Object</code></a> means the function is in <code class=\"language-text\">Object</code> category</li>\n</ul>\n<p>First statement of the function is validating <code class=\"language-text\">object</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> object <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> undefined <span class=\"token punctuation\">:</span> <span class=\"token function\">baseGet</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Interesting that it use <code class=\"language-text\">==</code> (eqeq) instead of <code class=\"language-text\">===</code> (eqeqeq) why? in <a href=\"https://eslint.org/docs/rules/no-eq-null\">eslint <code class=\"language-text\">no-eq-null</code> rule</a> the value can be both <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code>. This is convenient way for checking only <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code> but not include <code class=\"language-text\">&#39;&#39;</code>, <code class=\"language-text\">0</code> or <code class=\"language-text\">false</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> test1 <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> test2 <span class=\"token operator\">=</span> undefined<span class=\"token punctuation\">;</span>\ntest1 <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">// true</span>\ntest2 <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">// true</span></code></pre></div>\n<p>When <code class=\"language-text\">object</code> is not <code class=\"language-text\">null</code> or <code class=\"language-text\">undefined</code> the function call <code class=\"language-text\">baseGet</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n* The base implementation of `_.get` without support for default values.\n*\n* @private\n* @param {Object} object The object to query.\n* @param {Array|string} path The path of the property to get.\n* @returns {*} Returns the resolved value.\n*/</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">baseGet</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">,</span> path<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n path <span class=\"token operator\">=</span> <span class=\"token function\">castPath</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n     length <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>object <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> index <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   object <span class=\"token operator\">=</span> object<span class=\"token punctuation\">[</span><span class=\"token function\">toKey</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">[</span>index<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&amp;&amp;</span> index <span class=\"token operator\">==</span> length<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> object <span class=\"token punctuation\">:</span> undefined<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In <code class=\"language-text\">JSDoc</code> there is 1 new tag <a href=\"http://usejsdoc.org/tags-private.html\"><code class=\"language-text\">@private</code></a> means that we can not use this function.</p>\n<p>The first line it call <code class=\"language-text\">castPath</code> another private method to convert <code class=\"language-text\">path</code> to an array</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">path <span class=\"token operator\">=</span> <span class=\"token function\">castPath</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token comment\">/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">castPath</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isKey</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token function\">stringToPath</span><span class=\"token punctuation\">(</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>What is <code class=\"language-text\">isKey()</code> do? The description is pretty clear. Inside it has some checks that I’m not gonna dive any further.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">isKey</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> type <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">==</span> <span class=\"token string\">'number'</span> <span class=\"token operator\">||</span> type <span class=\"token operator\">==</span> <span class=\"token string\">'symbol'</span> <span class=\"token operator\">||</span> type <span class=\"token operator\">==</span> <span class=\"token string\">'boolean'</span> <span class=\"token operator\">||</span>\n      value <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> <span class=\"token function\">isSymbol</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> reIsPlainProp<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>reIsDeepProp<span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span>\n    <span class=\"token punctuation\">(</span>object <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> value <span class=\"token keyword\">in</span> <span class=\"token function\">Object</span><span class=\"token punctuation\">(</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>If the <code class=\"language-text\">value</code> is a key of <code class=\"language-text\">object</code>, it will be returned as an array but if not, it will be converted to string and passed into <code class=\"language-text\">stringToPath()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">return</span> <span class=\"token function\">isKey</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> <span class=\"token function\">stringToPath</span><span class=\"token punctuation\">(</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */</span>\n<span class=\"token keyword\">var</span> stringToPath <span class=\"token operator\">=</span> <span class=\"token function\">memoizeCapped</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token number\">46</span> <span class=\"token comment\">/* . */</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  string<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>rePropName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">,</span> number<span class=\"token punctuation\">,</span> quote<span class=\"token punctuation\">,</span> subString<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>quote <span class=\"token operator\">?</span> subString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>reEscapeChar<span class=\"token punctuation\">,</span> <span class=\"token string\">'$1'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>number <span class=\"token operator\">||</span> match<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>After a little exploration of <code class=\"language-text\">memoizeCapped</code> I decided to not go deeper into it but just to note that it use for caching a function.</p>\n<p>First <code class=\"language-text\">if</code> statement is checking whether first character is <code class=\"language-text\">.</code> or not. I do not need to find that what <code class=\"language-text\">charCode</code> number 46 is because it was put as a comment behind the statement. Awesome!</p>\n<p>Then there is <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace\"><code class=\"language-text\">string.replace()</code></a>.</p>\n<p>What is <code class=\"language-text\">rePropName</code>? The description is clear enough. Notice that they prefix any regex variables with <code class=\"language-text\">re</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/** Used to match property names within property paths. */</span>\n<span class=\"token operator\">...</span>\nrePropName <span class=\"token operator\">=</span> <span class=\"token regex\">/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>I never use it with a callback function let’s see what is it for.</p>\n<blockquote>\n<p><code class=\"language-text\">function</code> (replacement)\nA function to be invoked to create the new substring to be used to replace the matches to the given regexp or substr.</p>\n</blockquote>\n<p>Not quite fully understand but they have more explanation <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter\">here</a>.</p>\n<p>So <code class=\"language-text\">number</code>, <code class=\"language-text\">quote</code> and <code class=\"language-text\">subString</code> are result from each capture groups. What are they capture? I used <a href=\"https://regexper.com/\">Regexper</a> to visualized it. <a href=\"https://regexper.com/#%2F%5B%5E.%5B%5C%5D%5D%2B%7C%5C%5B%28%3F%3A%28-%3F%5Cd%2B%28%3F%3A%5C.%5Cd%2B%29%3F%29%7C%28%5B%22&#x27;%5D%29%28%28%3F%3A%28%3F!%5C2%29%5B%5E%5C%5C%5D%7C%5C%5C.%29*%3F%29%5C2%29%5C%5D%7C%28%3F%3D%28%3F%3A%5C.%7C%5C%5B%5C%5D%29%28%3F%3A%5C.%7C%5C%5B%5C%5D%7C%24%29%29%2Fg\">Link to full picture</a>.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e389d7832647c29d270a3df9dd26fc94/82ab5/rePropName.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 65.5126498002663%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACAklEQVQ4y4VT22rbQBDV/0Mf+9LXQlsKhb7WMYESapwm0NaO09i6WDfHWl0tS6u7fLqzJg5JHHdhtLeZs3PmjJS6rpGmKaqqwmuDfNq2wf/GbreD8rBomkYGPreu7WCvTKw8G33Xv7h/iGvbVoIqXdchSRJkWfbE8jzfm1jP5hPc3E0kkzzPjvpuNhsJrtCHDl/hICfTtGA5xkm6RVGgLMtHwL7vD4dEgTEP+tKCF2pg8S2Yl0CzfmGxHCOOEpRVKX0phlhyzveArdjQ4kAx5/KBNE2QpBlU8ycm8wGiiEO1r/Dn7xmiMEbOs73lW2y3WykqJaLEUSSK7sIPAtCaC1Df9+GtA3j3PuIgQxJyBIGPMIjF/ctuSJIUrncvWSmUTRCGYD7D3LiDZZmwbA0T8wOutXeYrd5j4X+Cu1ahmxocx4ITjqB7AxhsiGUwBAttxPFGiquQ3FSHuq6g2ypc14FhaLDXU9zoI3z5+hYfP7/BQp3BcV0J6MYjGP43AXYmbIC6TVFXDSqB8UTlnRCmEsWOwkjQT0XwGtPfU8ymt1gJMM9bi9pujqrMC/6oMvUQqUxqUcZkXdfKghcVKcmRUq+Jh7eiFxvx1zRtfTCKpaQkIG1IpedGDowx6KIEjuPg8mqMy+sxLNOUd8diKCHlVLNSK2Q8l/OPi3NcfB/KLjg1/gESjt+7SBrfVAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"rePropName\"\n        title=\"rePropName visualized\"\n        src=\"/static/e389d7832647c29d270a3df9dd26fc94/fb8a0/rePropName.png\"\n        srcset=\"/static/e389d7832647c29d270a3df9dd26fc94/1a291/rePropName.png 148w,\n/static/e389d7832647c29d270a3df9dd26fc94/2bc4a/rePropName.png 295w,\n/static/e389d7832647c29d270a3df9dd26fc94/fb8a0/rePropName.png 590w,\n/static/e389d7832647c29d270a3df9dd26fc94/82ab5/rePropName.png 751w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>From the picture above, the regex is not capture anything that’s not start and end with <code class=\"language-text\">[]</code> and must be any character inside. Then it will be separated into 3 groups 1) is number that will goes into <code class=\"language-text\">number</code> variable 2) If first character start with <code class=\"language-text\">&quot;</code> or <code class=\"language-text\">&#39;</code> will goes into <code class=\"language-text\">quote</code> variable 3) Is any thing after 2). (Oh my goodness, I just realized that <a href=\"https://regexper.com/\">Regexper</a> is so useful)</p>\n<p>So in replacer function, if <code class=\"language-text\">quote</code> has no value it will be returned as <code class=\"language-text\">number</code> or <code class=\"language-text\">match</code> but if it has, <code class=\"language-text\">subString</code> will be replace by using regex <code class=\"language-text\">reEscapeChar</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">result<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>quote <span class=\"token operator\">?</span> subString<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>reEscapeChar<span class=\"token punctuation\">,</span> <span class=\"token string\">'$1'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>number <span class=\"token operator\">||</span> match<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/** Used to match backslashes in property paths. */</span>\n<span class=\"token keyword\">var</span> reEscapeChar <span class=\"token operator\">=</span> <span class=\"token regex\">/\\\\(\\\\)?/g</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The statement <code class=\"language-text\">subString.replace(reEscapeChar, &#39;$1&#39;)</code> is removing <code class=\"language-text\">\\</code> from <code class=\"language-text\">subString</code>. Then it return the <code class=\"language-text\">result</code> value that will always be an array.</p>\n<p>Now to back to <code class=\"language-text\">baseGet()</code>. Statement <code class=\"language-text\">path = castPath(path, object);</code> is to convert input <code class=\"language-text\">path</code> to an <code class=\"language-text\">Array&lt;string&gt;</code>. Next statement is <code class=\"language-text\">while</code> loop to get value of <code class=\"language-text\">object</code> from <code class=\"language-text\">path</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// baseGet</span>\n<span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    length <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>object <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> index <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  object <span class=\"token operator\">=</span> object<span class=\"token punctuation\">[</span><span class=\"token function\">toKey</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">[</span>index<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Inside <code class=\"language-text\">toKey()</code>, the return statement is interesting.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">toKey</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> value <span class=\"token operator\">==</span> <span class=\"token string\">'string'</span> <span class=\"token operator\">||</span> <span class=\"token function\">isSymbol</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">+</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">==</span> <span class=\"token string\">'0'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">/</span> value<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token constant\">INFINITY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'-0'</span> <span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Turn value to string using <code class=\"language-text\">+ &#39;&#39;</code> but if value is <code class=\"language-text\">-0</code> then <code class=\"language-text\">-0 + &#39;&#39;</code> will be <code class=\"language-text\">&#39;0&#39;</code>.</li>\n<li>Check if <code class=\"language-text\">result</code> is <code class=\"language-text\">0</code> (number or string) and check if value is <code class=\"language-text\">-0</code> or not.</li>\n<li>If yes, return <code class=\"language-text\">-0</code>. I couldn’t figure out why it has to check the value because <code class=\"language-text\">object[0] === object[-0]</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Declaration of INFINITY</span>\n<span class=\"token keyword\">var</span> <span class=\"token constant\">INFINITY</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">// return of `toKey`</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>result <span class=\"token operator\">==</span> <span class=\"token string\">'0'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">/</span> value<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token constant\">INFINITY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'-0'</span> <span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">;</span></code></pre></div>\n<p>For example, if we give <code class=\"language-text\">object</code> and <code class=\"language-text\">path</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> object <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  a<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    b<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      c<span class=\"token punctuation\">:</span> <span class=\"token string\">'This is it'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> path <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>1st iteration, value of <code class=\"language-text\">object</code> will be <code class=\"language-text\">{b:{c:{&#39;This is it&#39;}}}</code>.\n2nd will be <code class=\"language-text\">{c:{&#39;This is it&#39;}}</code>.\nAnd the last one will be <code class=\"language-text\">&#39;This is it&#39;</code>.</p>\n<p>In the <code class=\"language-text\">return</code> of <code class=\"language-text\">baseGet()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&amp;&amp;</span> index <span class=\"token operator\">==</span> length<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> object <span class=\"token punctuation\">:</span> undefined<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">(index &amp;&amp; index == length)</code> is checking if the iteration is valid. If yes, it return <code class=\"language-text\">object</code> otherwise return <code class=\"language-text\">undefined</code></p>\n<p>Now get back to <code class=\"language-text\">get()</code> (finally!). The last statement is pretty straightforward.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">return</span> result <span class=\"token operator\">===</span> undefined <span class=\"token operator\">?</span> defaultValue <span class=\"token punctuation\">:</span> result<span class=\"token punctuation\">;</span></code></pre></div>\n<div style=\"margin:1em 0;width:100%;font-size:24px;font-weight:bold;text-align:center\">...</div>\n<p>Things I learned from reading <code class=\"language-text\">_.get</code></p>\n<ul>\n<li>Usages of <a href=\"http://usejsdoc.org/\">JSDoc</a>, which is very useful for readers of a function if you write them well.</li>\n<li>Using <code class=\"language-text\">== null</code> to check <code class=\"language-text\">null</code> and <code class=\"language-text\">undefined</code>.</li>\n<li>Simple but helpful comment in <code class=\"language-text\">if (string.charCodeAt(0) === 46 /* . */) {</code>.</li>\n<li>\n<p>Usages of <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace\"><code class=\"language-text\">string.replace</code></a></p>\n<ul>\n<li>Using replacer function.</li>\n<li>Using <code class=\"language-text\">$1</code>.</li>\n</ul>\n</li>\n<li>Usefulness of <a href=\"https://regexper.com/\">Regexper</a>.</li>\n<li><code class=\"language-text\">-0 + &#39;&#39; === &#39;0&#39;</code>. <a href=\"https://jsfiddle.net/Warizz/1p62jLkm/14/\">demo</a> <script async src=\"//jsfiddle.net/Warizz/1p62jLkm/8/embed/js,result/dark/\"></script></li>\n<li><code class=\"language-text\">0 === -0</code>(in JS). <a href=\"https://jsfiddle.net/Warizz/t9cw0x6L/5/\">demo</a>, <a href=\"https://stackoverflow.com/questions/7223359/are-0-and-0-the-same\">Are +0 and -0 the same?</a></li>\n</ul>","frontmatter":{"title":"Reading other people's code episode 1: _.get","date":"January 09, 2019"}}},"pageContext":{"slug":"/reading-other-people-code-ep-1/","previous":{"fields":{"slug":"/react-cleaner-way-to-compose-components/"},"frontmatter":{"title":"Cleaner way to compose components"}},"next":{"fields":{"slug":"/trip-2019-01-th/"},"frontmatter":{"title":"เขาสันหนอกวัว, กาญจนบุรี"}}}}